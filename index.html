<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Puzzle de Fotos</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 50px;
    position: relative;
  }

  #puzzle-container {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-gap: 5px;
    margin-bottom: 20px;
  }

  .slot {
    width: 100px;
    height: 100px;
    border: 2px dashed #aaa;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .slot.correct {
    border-color: green;
  }

  .piece {
    width: 100px;
    height: 100px;
    cursor: grab;
  }

  .pieces-container {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    grid-gap: 5px;
    margin-bottom: 20px;
  }

  #nextPhaseBtn {
    margin-top: 20px;
    padding: 8px 16px;
    font-size: 16px;
    display: none;
    cursor: pointer;
  }

  /* Caixa de mensagem personalizada */
  #messageBox {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #fff3e0;
    border: 3px solid #ffa726;
    border-radius: 12px;
    padding: 20px;
    width: 300px;
    text-align: center;
    font-size: 16px;
    color: #ff5722;
    display: none;
    z-index: 1000;
    box-shadow: 0 0 15px rgba(0,0,0,0.3);
  }

  #messageBox button {
    margin-top: 15px;
    padding: 6px 12px;
    font-size: 14px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background-color: #ffa726;
    color: white;
  }
</style>
</head>
<body>

<h1>Complete o Puzzle!</h1>

<div id="puzzle-container">
  <div class="slot" data-id="0"></div>
  <div class="slot" data-id="1"></div>
  <div class="slot" data-id="2"></div>
  <div class="slot" data-id="3"></div>
  <div class="slot" data-id="4"></div>
  <div class="slot" data-id="5"></div>
  <div class="slot" data-id="6"></div>
  <div class="slot" data-id="7"></div>
  <div class="slot" data-id="8"></div>
</div>

<div class="pieces-container"></div>
<button id="nextPhaseBtn">PrÃ³xima Fase</button>

<!-- Caixa de mensagem -->
<div id="messageBox">
  <div id="messageText"></div>
  <button id="closeMsgBtn">Ok</button>
</div>

<script>
let fase = 0;
const totalFases = 3;
const piecesContainer = document.querySelector('.pieces-container');
const slots = document.querySelectorAll('.slot');
const nextPhaseBtn = document.getElementById('nextPhaseBtn');
const messageBox = document.getElementById('messageBox');
const messageText = document.getElementById('messageText');
const closeMsgBtn = document.getElementById('closeMsgBtn');
let draggedPiece = null;

// FunÃ§Ã£o para carregar puzzle
function loadPhase(fase) {
  piecesContainer.innerHTML = "";
  slots.forEach(slot => {
    slot.innerHTML = "";
    slot.classList.remove('correct');
  });
  nextPhaseBtn.style.display = "none";
  draggedPiece = null;

  for (let i = 0; i < 9; i++) {
    const img = document.createElement("img");
    img.src = `fase${fase}/piece_${i}.png`; // <-- caminho atualizado
    img.classList.add("piece");
    img.draggable = true;
    img.dataset.id = i.toString();
    piecesContainer.appendChild(img);
  }

  // Adiciona eventos dragstart
  piecesContainer.querySelectorAll('.piece').forEach(img => {
    img.addEventListener('dragstart', e => draggedPiece = img);
  });
}

// Drag & Drop para slots
slots.forEach(slot => {
  slot.addEventListener('dragover', e => e.preventDefault());
  slot.addEventListener('drop', function() {
    if (!this.hasChildNodes() && draggedPiece) {
      this.appendChild(draggedPiece);
      draggedPiece = null;
      checkPuzzle();
    }
  });
});

// Verifica se o puzzle estÃ¡ completo
function checkPuzzle() {
  let correct = 0;
  slots.forEach(slot => {
    const piece = slot.firstChild;
    if (piece && piece.dataset.id === slot.dataset.id) {
      slot.classList.add('correct');
      correct++;
    } else {
      slot.classList.remove('correct');
    }
  });

  if (correct === slots.length) {
    // Mostra caixa de mensagem personalizada
    messageText.innerHTML = `VocÃª conseguiu e eu queria dizer que eu terei quantos primeiros dates forem precisos com vocÃª!<br><br>ParabÃ©ns! ðŸ’› VocÃª completou a fase ${fase + 1}!`;
    messageBox.style.display = 'block';
  }
}

// Fechar a caixa de mensagem
closeMsgBtn.addEventListener('click', () => {
  messageBox.style.display = 'none';
  if(fase < totalFases - 1){
    nextPhaseBtn.style.display = "inline-block";
  }
});

// BotÃ£o prÃ³xima fase
nextPhaseBtn.addEventListener('click', () => {
  fase++;
  if(fase < totalFases){
    loadPhase(fase);
  }
});

// Carrega primeira fase
loadPhase(fase);
</script>

</body>
</html>
